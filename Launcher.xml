<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<ModulePrefs title="Google.m" />
<Content type="html"><![CDATA[
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Launcher</title>
  <style>
    body {
      background-color: #1e1e1e;
      color: #f0f0f0;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
    }

    .button-container {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
    }

    .game-wrapper {
      display: flex;
      align-items: center;
      gap: 10px;
      background-color: #2b2b2b;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .fancy-button {
      width: 180px;
      height: 50px;
      border: 2px solid #8a85ff;
      border-radius: 6px;
      background-color: #1e1e1e;
      color: #8a85ff;
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .fancy-button:hover {
      background-color: #8a85ff;
      color: #1e1e1e;
      transform: translateY(-2px);
    }

    input[type="checkbox"] {
      transform: scale(1.3);
      accent-color: #8a85ff;
      cursor: pointer;
    }

    /* Help button */
    #help-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      font-size: 24px;
      background-color: #8a85ff;
      color: #1e1e1e;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
    }

    /* Help modal */
    #help-modal {
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 300px;
      background-color: #2b2b2b;
      border: 2px solid #8a85ff;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.5);
      display: none;
      z-index: 10000;
    }

    #help-modal h3 {
      margin-top: 0;
      color: #8a85ff;
    }

    #close-help {
      position: absolute;
      top: 8px;
      right: 12px;
      background: none;
      border: none;
      color: #f0f0f0;
      font-size: 18px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="button-container" id="launcher"></div>

  <!-- Help Button -->
  <button id="help-button">?</button>

  <!-- Help Modal -->
  <div id="help-modal">
    <button id="close-help">âœ–</button>
    <h3>How this works</h3>
<p>âœ… Check the box next to a game to load it in the background.</p>
<p>ðŸŽ® Click the button to launch it fullscreen.</p>
<p>â›” Press <strong>Esc</strong> to exit fullscreen â€” the game keeps running if the box is still checked.</p>
<p>ðŸ§¹ Uncheck the box to shut the game down.</p>
<p>ðŸ“¦ You can have up to 3 games running at once. More than that might slow things down.</p>
<p>ðŸ’¡ Pro tip: Only check the games youâ€™re actually playing. Donâ€™t fry your Chromebook, bro.</p>

  </div>

  <script>
    const ROOT_URL = 'https://jjjwelch420.github.io/Launcher/';
    const games = [
      { id: 'racing', label: 'Racing' },
      { id: 'stick-war', label: 'Stick War' },
      { id: 'ARC', label: 'ARC' },
      { id: 'basket-random', label: 'Basket Random' },
      { id: 'sprinter-flash', label: 'Sprinter Flash' },
      { id: 'minecraft', label: 'Minecraft' },
      { id: 'gunspin', label: 'Gun Spin' },
      { id: 'OvO', label: 'OvO' },
      { id: 'Cookie', label: 'Cookie Clicker' },
      { id: 'SM64', label: 'Super Ah 64' },
      { id: 'Drift-RU', label: 'Drift Hunters' },
      { id: 'Funny2', label: 'Funny Shooter' },
      { id: 'snow-riders', label: 'Snow Riders' },
      { id: 'riddle-1', label: 'Riddle School 1' },
      { id: 'riddle-2', label: 'Riddle School 2' },
      { id: 'red-vs-blue', label: 'Red vs Blue' }
    ];

    function createLauncherUI() {
      const container = document.getElementById('launcher');
      games.forEach(game => {
        const wrapper = document.createElement('div');
        wrapper.className = 'game-wrapper';

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.id = `check-${game.id}`;
        checkbox.onchange = () => toggleGameIframe(game.id, checkbox.checked);

        const button = document.createElement('button');
        button.className = 'fancy-button';
        button.textContent = game.label;
        button.onclick = () => fullscreenGame(game.id);

        wrapper.appendChild(checkbox);
        wrapper.appendChild(button);
        container.appendChild(wrapper);
      });
    }

    async function fetchHTMLFromXML(url) {
      try {
        const response = await fetch(url);
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, 'application/xml');
        const contentNode = xmlDoc.querySelector('Content');
        return contentNode?.textContent || '<p>Error loading content</p>';
      } catch (error) {
        console.error('Failed to fetch XML:', error);
        return '<p>Failed to load XML content</p>';
      }
    }

    async function toggleGameIframe(gameId, shouldEnable) {
  const existing = document.getElementById(`iframe-${gameId}`);
  if (shouldEnable && !existing) {
    const fullURL = ROOT_URL + 'Ports/' + gameId + '.xml';
    const htmlContent = await fetchHTMLFromXML(fullURL);

    const iframe = document.createElement('iframe');
    iframe.id = `iframe-${gameId}`;
    iframe.style.position = 'fixed';
    iframe.style.top = '0';
    iframe.style.left = '0';
    iframe.style.width = '100vw';
    iframe.style.height = '100vh';
    iframe.style.border = 'none';
    iframe.style.zIndex = '9999';
    iframe.style.display = 'none';
    document.body.appendChild(iframe);

    // Wait a tick to ensure iframe is in the DOM
    setTimeout(() => {
      const doc = iframe.contentDocument || iframe.contentWindow.document;
      doc.open();
      doc.write(htmlContent);
      doc.close();
    }, 0);
  } else if (!shouldEnable && existing) {
    existing.remove();
  }
}




    function fullscreenGame(gameId) {
      const iframe = document.getElementById(`iframe-${gameId}`);
      if (!iframe) {
        alert('Enable the checkbox first to load this game.');
        return;
      }

      iframe.style.display = 'block';
      if (iframe.requestFullscreen) {
        iframe.requestFullscreen();
      } else if (iframe.webkitRequestFullscreen) {
        iframe.webkitRequestFullscreen();
      } else if (iframe.mozRequestFullScreen) {
        iframe.mozRequestFullScreen();
      } else if (iframe.msRequestFullscreen) {
        iframe.msRequestFullscreen();
      }

      document.addEventListener('fullscreenchange', () => {
        if (!document.fullscreenElement) {
          iframe.style.display = 'none';
        }
      });
    }

    // Help modal logic
    const helpBtn = document.getElementById('help-button');
    const helpModal = document.getElementById('help-modal');
    const closeHelp = document.getElementById('close-help');

    helpBtn.onclick = () => {
      helpModal.style.display = 'block';
    };

    closeHelp.onclick = () => {
      helpModal.style.display = 'none';
    };

    createLauncherUI();
  </script>
</body>
</html>
]]></Content>
</Module>
